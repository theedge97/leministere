	<!-- debut de head-->
    <%- include('head'); -%>
    <!--Fin de head -->
    <style>
      .error
    {
        color: red;
    }
    #erreurmotpasse,  #erreurnumero
    {
        display: none;
    }
    #sucessoperation {
            position: absolute;
              top: 50%;
              display: none;
          }
  
    </style> 
        <script src="/assets/semantic/assets/js/jquery.min.js"></script>
        <script src="/assets/semantic/assets/js/jquery.validate.js"></script>
      
        </head>
        <%- include('menue'); -%>
        
                    <main class="col-md-9  ms-sm-auto col-lg-10 px-md-4">
                          
                        <div class="row account-contant">
                            <div class="col-12">
                                <div class="card card-statistics">
                                    <div class="card-body p-0">
                                        <div class="row no-gutters">
                                            <div class="col-xl-3 pb-xl-0 pb-5 border-right">
                                                <div class="page-account-profil pt-5">
                                                    <div class="profile-img text-center rounded-circle">
                                                        <div class="pt-5">
                                                            <div class="bg-img m-auto">
                                                                <img src="/assets/semantic/assets/img/profile.png"  width="100" height="100"/>
                                     </div>
                                                        
                                                        </div>
                                                    </div>

                                                    <div class="py-5 profile-counter">
                                               
                                                    </div>

                                                    <div class="profile-btn text-center">
                                                        <div><button class="btn btn-danger">Déconnection</button></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-xl-5 col-md-6 col-12 border-t border-right">
                                                <div class="page-account-form">
                                                    <div class="form-titel border-bottom p-3">
                                                        <h5 class="mb-0 text-primary py-2">Détails du  Compte  </h5>
                                                    </div>
                                                    <div class="p-4">
                                                        <form>
                                                            <div class="form-row ">
                                                                <div class="form-group col-md-12">
                                                                    <label class="text-primary" for="name1">Nom </label>
                                                                    <input type="text" value="<%= unagent.nom %>"  class="form-control" id="nom" name="nom" >
                                                                </div>
                                                                <div class="form-group col-md-12">
                                                                    <label class="text-primary" for="title1">Prénom</label>
                                                                    <input type="text" name="prenom" class="form-control" value="<%= unagent.prenom %>" id="prenom" >
                                                                </div><div class="form-group col-md-12">
                                                                    <label class="text-primary" for="phone1">Matricule</label>
                                                                    <input type="text" class="form-control" id="matricule" name="genre" value="<%= unagent.matricule %>">
                                                                </div>
                                                                <div class="form-group col-md-12">
                                                                    <label class="text-primary" for="phone1">Genre</label>
                                                                    <input type="text" class="form-control" id="genre" name="genre" value="<%= unagent.sex %>">
                                                                </div>
                                                                <div class="form-group col-md-12">
                                                                    <label class="text-primary" for="numero">Numéro de téléphone</label>
                                                                    <input type="text" class="form-control" id="numero" name="numero" value="<%= unagent.telephone %>">
                                                                </div>
                                                                <div class="form-group col-md-12">
                                                                    <label class="text-primary" for="email1">Email</label>
                                                                    <input type="email" class="form-control" id="email1" value="<%= unagent.email %>">
                                                                </div>
                                                                <div class="form-group col-md-12">
                                                                    <label class="text-primary" for="ambassade">Ambassade</label>
                                                                    <input type="text" class="form-control" id="ambassade" value="<%= unagent.pays %>">
                                                                </div><hr class="text-primary">
                                                              
                                                                
                                                            </div>
                                                        </form>

                                                            
                                                            <button type="submit" data-bs-toggle="modal" data-bs-target="#exampleModal" class="btn btn-primary">Modifier le mot de passe </button>
                                                        <!-- Modal Ajout article-->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header bg-primary">
          <h5 class="modal-title " id="exampleModalLabel">Modification de mot de passe  </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
           <form method="post" action="/AgentAmbassade/Modifiermotdepasse"   id="modif"> 
                                       
        <div class="mb-3"> 
        <input type="password" class="form-control p-3" id="motdepasse" name="motdepasse" placeholder="Entrez le nouveau mot de passe " required> 
        </div>                                                                 
        <div class="text-end">
  
          <button type="button" class="btn btn-secondary " data-bs-dismiss="modal">Fermer</button>
                                          <button type="submit" class="btn btn-primary pe-4 ps-4 rounded-pill">
                                              <span>Modifier</span>
                                          </button>
                                      </div>                                     
                                  </form>
        </div>
      </div>
    </div>
  </div>
                            <!--Fin -->
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-xl-4 col-md-6 border-t col-12">
                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="align-items-center row">
                            <div id="sucessoperation" class="text-center bg-primary text-white offset-md-3 col-lg-4  py-3">
                            <h3>Le Mot de passe a été modifié avec Success</h3>  
                            </div>
                          </div> 
                        
                    </main>
                </div>
            </div>
            <script src="/assets/semantic/assets/js/popper.min.js"></script>
            <script src="/assets/semantic/bootstrap/js/bootstrap.min.js"></script>
            <script src="/assets/semantic/assets/js/jquery.min.js"></script>
            <script src="/assets/semantic/assets/js/moment.min.js"></script>
 
        <script src="/assets/semantic/assets/js/jquery.validate.js"></script>
        <script src="/assets/semantic/assets/js/html2pdf.bundle.min.js"></script>
        <script>
 
  
            $().ready(function() {
              // validate the comment form when it is submitted
              jQuery.validator.addMethod("phoneGuinee", function (phone_number, element) {
                phone_number = phone_number.replace(/\s+/g, "");
                return this.optional(element) || phone_number.length >= 9 && phone_number.match(/^6[1,2,5,6]{1}[0-9]{7}$/);
            }, "Veuillez Entrez le bon format de Numero");
              // validate signup form on keyup and submit
              $("#modif").validate({
                rules: {
                    motdepasse: {
                    required: true 
                }
                    
                },
                messages: {
                    motdepasse: {
                    required: "Veuillez entrer un  mot de passe "
                 }
                },
                submitHandler: function(form){
             
        $.ajax({
            url: form.action,
            type: form.method,
            data: $(form).serialize(),
            success: function(response) {
             
                
                              
                         if (response.success) {  
                         $("#sucessoperation").css({ 
                              display: 'block'
                            });
                            setTimeout(function () {
                                $("#sucessoperation").css({ 
                              display: 'none'
                            }); 
                            window.location.href = "/AgentAmbassade/Comptes";
                           
                        }, 3000);
                 
                         }       
                
                
                           }            
              });       
        }
        
        
              });
          
          
              //code to hide topic selection, disable for demo
              var newsletter = $("#newsletter");
              // newsletter topics are optional, hide at first
              var inital = newsletter.is(":checked");
              var topics = $("#newsletter_topics")[inital ? "removeClass" : "addClass"]("gray");
              var topicInputs = topics.find("input").attr("disabled", !inital);
              // show when newsletter is checked
              newsletter.click(function() {
                topics[this.checked ? "removeClass" : "addClass"]("gray");
                topicInputs.attr("disabled", !this.checked);
              });
          // Recuperer la liste d'unne ville correspondant a un pays 
          
         
        
        
            });
            </script>
        </body>
    </html>
    
	<!-- debut de head-->
    <%- include('head'); -%>
    <!--Fin de head -->
    <style>
           .error
          {
              color: red;
          }
          #erreurdeoperation{
              position: absolute;
              top: 40%;
              display: none;
          }
          #sucessoperation {
            position: absolute;
              top: 50%;
              display: none;
          }
          #tabl {
              display: block;
          }
         
    </style>
        </head>

        <%- include('menue'); -%>
        
                    <main class="col-md-9  ms-sm-auto col-lg-10 px-md-4">
                        <div class="row">
                            <div class="d-block d-sm-flex flex-nowrap align-items-center">
                                <div class="page-title text-primary mb-2 mb-sm-0">
                                    <h1 class="text-dark">Compte de Resultat</h1>
                                </div>
                               
                            </div>
                        </div>
                        <div class="row">
                            <div class="align-items-center row">
                                <div id="erreurdeoperation" class="text-center bg-warning text-white offset-md-3 col-lg-4  py-3">
                                <h3>Veuillez bien renseigner les informations</h3>  
                                </div>
                              </div> 
                              <div class="align-items-center row">
                                <div id="sucessoperation" class="text-center bg-primary text-white offset-md-3 col-lg-4  py-3">
                                <h3>Operation Validé  </h3>  
                                </div>
                              </div> 
                        </div>
                        
                     
                        <div class="row"  style="box-shadow: 12px 12px 2px 1px rgba(0, 0, 255, .2); padding: 5px; margin: 2px;" id="tabl">
                              <div class="col-lg-12 text-dark">
                                  <div class="row">
                                      <div class="col-lg-4">
                                         <p class="pt-3">Ambassade  de la république de Guinée au  <%= pays %> </p><br>
                                         <span>telephone : 625121212</span>
                                      </div>

                                      <div class="col-lg-4">
                                          <img src="/assets/semantic/assets/img/guinee.jpg" />
                                      </div>
                                      
                                      <div class="col-lg-4">
                                          <h2>
                                          </h2>
                                      </div>
                                      
                                  </div>
                              </div>
                              <div class="col-lg-12 text-center bg-primary">
                                   <h1 class="text-white">Compte des Resultats</h1>
                              </div>
                             <hr class="text-primary">
                             
                              <div  class="col-lg-12 text-dark">
                                <div class="table-responsive m-t-40" style="clear: both;">
                                    <% if(typeof lescharges !== "undefined"  && typeof lesproduits !== "undefined" ){ totocharges = 0; totoproduits = 0; %>
                                
                                    <table  id="tableau" class="table table-striped table-bordered dataTable" id="tableau">
                                        <thead>
                                            <tr>
                                                <th class="text-left  text-center" >Numéro de Compte </th>
                                                <th class="text-left  text-center" >Intitulé de Compte</th>
                                                <th class="text-left text-center" >Total</th>
                                            </tr>
                                          
                                        </thead>
                                        
                                        <tbody class="text-left text-center">
                                            <tr id="charge">
                                                <td style="text-align: left;" colspan="4">CHARGES</td>
                                            </tr>
                                            <% if(typeof lescharges !== "undefined"){  %>
                                                
              <% for(var j= 0 ; j < lescharges.length; j++)  { totocharges += lescharges[j].toto;
                fc = lescharges[j].toto;
                donlc = new Intl.NumberFormat('gn-GN').format(fc);   
                %> 
                                            <tr>
                                                 <td><%= lescharges[j].numcpte %></td>
                                                 <td><%= lescharges[j].intutile %></td>
                                                 <td><%= donlc %></td>
                                             </tr>
                                             <% }  %>
                                             <tr>
                                                <td style="text-align: right;" colspan="4">Total: <span> <%  totochar = new Intl.NumberFormat('gn-GN').format(totocharges);  %><%= totochar %></span></td>
                                            </tr>
                                            <% }  %>
                                            <tr id="produit">
                                                <td style="text-align: left;"  colspan="4">PRODUITS</td>
                                            </tr>
                                            <% if(typeof lesproduits !== "undefined"){  %>
                                                
                                                <% for(var i= 0 ; i < lesproduits.length; i++)  { totoproduits += lesproduits[i].toto; fd = lesproduits[i].toto;
                                                    donlk = new Intl.NumberFormat('gn-GN').format(fd);
                                                    %> 
                                                                              <tr>
                                                                                   <td><%= lesproduits[i].numcpte %></td>
                                                                                   <td><%= lesproduits[i].intutile %></td>
                                                                                   <td><%= donlk %></td>
                                                                               </tr>
                                                                               <% }  %>
                                            <tr>
                                                <td style="text-align: right;" colspan="4">Total: <span><% totopro = new Intl.NumberFormat('gn-GN').format(totoproduits); %><%= totopro %></span></td>
                                            </tr>
                                            
                                            <% }  %>

                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td style="text-align: right;" colspan="4">Resultat: <span> <% totaux = new Intl.NumberFormat('gn-GN').format(totoproduits - totocharges);  %> <%= totaux %></span></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                    <% }  %>
                                </div>
                              </div>
                              
                        </div>
                        <div class="row">
                            <div class="pt-5 col-md-12">
                                  
                                    
                                <div class="text-right">
                                    <button id="imprimer" class="btn btn-success" type="submit"> Inprimer le document</button>
                                </div>
                                
                            </div>
                        </div>
                        
                    </main>
                </div>
            </div>
            <script src="/assets/semantic/assets/js/popper.min.js"></script>
            <script src="/assets/semantic/bootstrap/js/bootstrap.min.js"></script>
            <script src="/assets/semantic/assets/js/jquery.min.js"></script>
            <script src="/assets/semantic/assets/js/moment.min.js"></script>
 
        <script src="/assets/semantic/assets/js/jquery.validate.js"></script>
        <script src="/assets/semantic/assets/js/html2pdf.bundle.min.js"></script>
    
  
     <script>
        document.querySelector("#imprimer").addEventListener("click", ()=>{
            const invoice = this.document.getElementById("tabl");
            var opt = {
  margin:       0.1,
  filename:     'compteresultats.pdf',
  image:        { type: 'jpeg', quality: 0.98 },
  html2canvas:  { scale: 2 },
  jsPDF:        { unit: 'in', format: 'a4', orientation: 'landscape' }
};
            html2pdf().from(invoice).set(opt).save();
            
        })



        

        $('#irt').on('click', function(e){
              
            ligneetat('huuu', "HGAGG", "HYST", "POPO", "YYYAYY");
 }) 
</script>
    
        </body>
    </html>
    